<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intel Sustainability & Localization</title>
  <link rel="stylesheet" href="style-lavender.css">
</head>
<body>

  <!-- Header with RTL Toggle -->
  <header>
    <h1>Intel Sustainability & Localization Project</h1>
    <div class="header-controls">
      <button id="rtl-toggle">Toggle RTL</button>
      <label for="lang-select" class="visually-hidden">Language</label>
      <select id="lang-select" aria-label="Choose language">
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="ar">العربية</option>
      </select>
      <button id="reset-lang" class="reset-lang">Reset language</button>
    </div>
    <div id="lang-indicator" class="lang-indicator" aria-live="polite" hidden></div>
  </header>

  <!-- Three Column Section -->
  <section class="three-columns">
    <div class="col">
      <img src="img/innovation.jpg" alt="Innovation Icon">
      <h2>Innovation</h2>
      <p>Intel drives sustainable innovation with efficient technology.</p>
      <button>Learn More</button>
    </div>
    <div class="col">
      <img src="img/environment.jpg" alt="Planet Icon">
      <h2>Environment</h2>
      <p>We prioritize environmental responsibility across our processes.</p>
      <button>Learn More</button>
    </div>
    <div class="col">
      <img src="img/community.jpg" alt="Community Icon">
      <h2>Community</h2>
      <p>Our mission is to support communities globally with technology.</p>
      <button>Learn More</button>
    </div>
  </section>

  <!-- Timeline -->
  <section class="timeline">
    <h2>Intel’s Sustainability Timeline</h2>
    <div class="timeline-container">
      <div class="timeline-card">
        <img src="img/1.jpg" alt="Intel founders 1968">
        <h3>1968</h3>
        <p class="hidden">Robert Noyce and Gordon Moore rename NM Electronics to Intel Corporation, laying the foundation for decades of innovation.</p>
      </div>
      <div class="timeline-card">
        <img src="img/2.jpg" alt="Intel milestone 1971">
        <h3>1971</h3>
        <p class="hidden">Intel debuts the 4004, the world's first commercial microprocessor.</p>
      </div>
      <div class="timeline-card">
        <img src="img/3.jpg" alt="Intel milestone 1978">
        <h3>1978</h3>
        <p class="hidden">Launch of the 8086 processor, establishing the x86 architecture.</p>
      </div>
      <div class="timeline-card">
        <img src="img/4.jpg" alt="Intel milestone 1985">
        <h3>1985</h3>
        <p class="hidden">Intel introduces the 386 processor with 32-bit architecture.</p>
      </div>
      <div class="timeline-card">
        <img src="img/5.jpg" alt="Intel milestone 1993">
        <h3>1993</h3>
        <p class="hidden">Intel expands consumer and enterprise microprocessor offerings.</p>
      </div>
      <div class="timeline-card">
        <img src="img/6.jpg" alt="Intel milestone 2006">
        <h3>2006</h3>
        <p class="hidden">Peak GHG emissions year and start of major sustainability investments.</p>
      </div>
      <div class="timeline-card">
        <img src="img/7.jpg" alt="Intel milestone 2020">
        <h3>2020</h3>
        <p class="hidden">Intel launches the RISE strategy and 2030 goals.</p>
      </div>
      <div class="timeline-card">
        <img src="img/8.jpg" alt="Intel milestone 2022">
        <h3>2022</h3>
        <p class="hidden">Intel commits to net-zero greenhouse gas emissions by 2040.</p>
      </div>
      <div class="timeline-card">
        <img src="img/9.jpg" alt="Intel milestone 2024">
        <h3>2024</h3>
        <p class="hidden">Intel hosts the Sustainability Summit to drive collaboration across partners.</p>
      </div>
    </div>
  </section>

  <!-- Subscription Form -->
  <section class="subscribe">
    <h2>Stay Updated</h2>
    <form>
      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" required aria-label="Email Address">
      <button type="submit">Subscribe</button>
    </form>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Intel Sustainability Project | Designed by Yusra</p>
  </footer>

  <!-- Combined script: i18n, manual language switcher, RTL toggle, and timeline interactivity -->
  <script>
    (function() {
      const translations = {
        en: {
          headerTitle: 'Intel Sustainability & Localization Project',
          rtlButton: 'Toggle RTL',
          cols: [
            {title: 'Innovation', text: 'Intel drives sustainable innovation with efficient technology.'},
            {title: 'Environment', text: 'We prioritize environmental responsibility across our processes.'},
            {title: 'Community', text: 'Our mission is to support communities globally with technology.'}
          ],
          learnMore: 'Learn More',
          timelineHeading: 'Intel’s Sustainability Timeline',
          subscribeHeading: 'Stay Updated',
          emailLabel: 'Email Address',
          subscribeButton: 'Subscribe',
          footer: '© 2025 Intel Sustainability Project | Designed by Yusra'
        },
        es: {
          headerTitle: 'Proyecto de Sostenibilidad y Localización de Intel',
          rtlButton: 'Alternar RTL',
          cols: [
            {title: 'Innovación', text: 'Intel impulsa la innovación sostenible con tecnología eficiente.'},
            {title: 'Medio Ambiente', text: 'Priorizamos la responsabilidad ambiental en todos nuestros procesos.'},
            {title: 'Comunidad', text: 'Nuestra misión es apoyar a las comunidades a nivel mundial con tecnología.'}
          ],
          learnMore: 'Más información',
          timelineHeading: 'Cronología de Sostenibilidad de Intel',
          subscribeHeading: 'Mantente informado',
          emailLabel: 'Dirección de correo',
          subscribeButton: 'Suscribirse',
          footer: '© 2025 Proyecto de Sostenibilidad de Intel | Diseñado por Yusra'
        },
        fr: {
          headerTitle: 'Projet Durabilité et Localisation d\'Intel',
          rtlButton: 'Basculer RTL',
          cols: [
            {title: 'Innovation', text: 'Intel favorise l\'innovation durable avec une technologie efficace.'},
            {title: 'Environnement', text: 'Nous privilégions la responsabilité environnementale dans nos processus.'},
            {title: 'Communauté', text: 'Notre mission est de soutenir les communautés dans le monde grâce à la technologie.'}
          ],
          learnMore: 'En savoir plus',
          timelineHeading: 'Chronologie de la durabilité d\'Intel',
          subscribeHeading: 'Restez informé',
          emailLabel: 'Adresse e-mail',
          subscribeButton: 'S\'abonner',
          footer: '© 2025 Projet de durabilité Intel | Conçu par Yusra'
        },
        ar: {
          headerTitle: 'مشروع الاستدامة والتوطين لدى إنتل',
          rtlButton: 'تبديل RTL',
          cols: [
            {title: 'الابتكار', text: 'تدفع إنتل الابتكار المستدام بتكنولوجيا فعالة.'},
            {title: 'البيئة', text: 'نضع المسؤولية البيئية على رأس أولوياتنا في جميع عملياتنا.'},
            {title: 'المجتمع', text: 'مهمتنا هي دعم المجتمعات عالمياً بالتكنولوجيا.'}
          ],
          learnMore: 'المزيد',
          timelineHeading: 'المحور الزمني لاستدامة إنتل',
          subscribeHeading: 'ابقَ على اطلاع',
          emailLabel: 'البريد الإلكتروني',
          subscribeButton: 'اشترك',
          footer: '© 2025 مشروع استدامة إنتل | التصميم: يسرى'
        }
      };

      // Direction override helpers: allow user to persist a manual dir choice
      function getDirOverride() {
        return localStorage.getItem('dirOverride');
      }
      function setDirOverride(val) {
        if (val) localStorage.setItem('dirOverride', val);
        else localStorage.removeItem('dirOverride');
      }

      function applyTranslations(langKey) {
        const dict = translations[langKey] || translations.en;
        const isRtlLang = ['ar','he','fa','ur'].includes(langKey);
        document.documentElement.lang = langKey;
        // prefer an explicit user override for direction
        const override = getDirOverride();
        const finalDir = override || (isRtlLang ? 'rtl' : 'ltr');
        document.documentElement.dir = finalDir;
        document.body.dir = finalDir;

        const header = document.querySelector('header h1');
        if (header) header.textContent = dict.headerTitle;
        const rtlBtn = document.getElementById('rtl-toggle');
        if (rtlBtn) rtlBtn.textContent = dict.rtlButton;

        const cols = document.querySelectorAll('.three-columns .col');
        cols.forEach((col, i) => {
          const title = col.querySelector('h2');
          const para = col.querySelector('p');
          const btn = col.querySelector('button');
          if (title && dict.cols[i]) title.textContent = dict.cols[i].title;
          if (para && dict.cols[i]) para.textContent = dict.cols[i].text;
          if (btn) btn.textContent = dict.learnMore;
        });

        const timelineHeading = document.querySelector('.timeline h2');
        if (timelineHeading) timelineHeading.textContent = dict.timelineHeading;

        const subscribeHeading = document.querySelector('.subscribe h2');
        if (subscribeHeading) subscribeHeading.textContent = dict.subscribeHeading;
        const emailLabel = document.querySelector('label[for="email"]');
        if (emailLabel) emailLabel.textContent = dict.emailLabel;
        const subscribeBtn = document.querySelector('.subscribe button');
        if (subscribeBtn) subscribeBtn.textContent = dict.subscribeButton;

        const footerP = document.querySelector('footer p');
        if (footerP) footerP.textContent = dict.footer;

        // update select value if present
        const select = document.getElementById('lang-select');
        if (select) select.value = langKey;
      }

      // Determine initial language (localStorage -> navigator.languages -> navigator.language -> en)
      const supported = ['en','es','fr','ar'];
  const stored = localStorage.getItem('siteLang');
  function pickFromBrowser() {
        // navigator.languages (array) preferred when available
        const langs = (navigator.languages && navigator.languages.length) ? navigator.languages : [navigator.language || navigator.userLanguage || 'en'];
        for (let l of langs) {
          if (!l) continue;
          const key = l.toLowerCase().split('-')[0];
          if (supported.includes(key)) return key;
        }
        return null;
      }
      const browserChoice = pickFromBrowser();
      const initial = stored || browserChoice || 'en';
      applyTranslations(initial);

      // Show an indicator if the language was auto-detected (not set in localStorage)
      const langIndicatorEl = document.getElementById('lang-indicator');
      const isAuto = !stored && browserChoice;
      if (langIndicatorEl) {
        if (isAuto) {
          langIndicatorEl.hidden = false;
          const names = {en:'English', es:'Español', fr:'Français', ar:'العربية'};
          langIndicatorEl.textContent = `Detected language: ${names[initial] || initial}`;
          setTimeout(() => { if (langIndicatorEl) langIndicatorEl.hidden = true; }, 5000);
        } else {
          langIndicatorEl.hidden = true;
        }
      }

      // Hook the language selector
      const langSelect = document.getElementById('lang-select');
      if (langSelect) {
        langSelect.addEventListener('change', (e) => {
          const v = e.target.value;
          localStorage.setItem('siteLang', v);
          applyTranslations(v);
          // hide indicator when user manually picks
          const li = document.getElementById('lang-indicator'); if (li) li.hidden = true;
        });
      }

      // Reset language preference button (also clears any dir override so auto-detect resumes)
      const resetBtn = document.getElementById('reset-lang');
      if (resetBtn) {
        resetBtn.addEventListener('click', () => {
          localStorage.removeItem('siteLang');
          setDirOverride(null);
          // re-run detection
          const newChoice = pickFromBrowser() || 'en';
          applyTranslations(newChoice);
          const li = document.getElementById('lang-indicator');
          if (li) {
            li.hidden = false;
            const names = {en:'English', es:'Español', fr:'Français', ar:'العربية'};
            li.textContent = `Detected language: ${names[newChoice] || newChoice}`;
            setTimeout(() => { if (li) li.hidden = true; }, 5000);
          }
        });
      }

      // RTL toggle (saves manual override)
      const rtlBtnEl = document.getElementById('rtl-toggle');
      if (rtlBtnEl) {
        rtlBtnEl.addEventListener('click', () => {
          const current = document.documentElement.dir || document.body.dir || 'ltr';
          const next = (current === 'ltr') ? 'rtl' : 'ltr';
          setDirOverride(next);
          document.documentElement.dir = next;
          document.body.dir = next;
        });
      }

      // Timeline card reveal on click
      document.querySelectorAll('.timeline-card').forEach(card => {
        card.addEventListener('click', () => {
          const p = card.querySelector('p');
          if (p) p.classList.toggle('hidden');
        });
      });
    })();
  </script>

</body>
</html>
